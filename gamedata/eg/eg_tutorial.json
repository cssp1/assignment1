// Copyright (c) 2015 SpinPunch. All rights reserved.
// Use of this source code is governed by an MIT-style license that can be
// found in the LICENSE file.

{
    // THE "RAILS" TUTORIAL DESCRIBED HERE IS NOT USED!
    // BUT PLEASE KEEP THIS FILE INTACT BECAUSE main.js MAY HAVE HARDCODED REFERENCES TO IT.

    "START": { "kind": "slideshow",
               "asset": "tutorial_slideshow0",
               "ui_description": "Unused tutorial.",
               "bg_fill_color": [1,1,1,1],
               "disable_landscape_clicks": 1,
               "disable_combat": 1,
               "metric": "0130_tutorial_300years",
               "next_button_arrow": 1,
               "next": "slide1" },
    "slide1": { "kind": "slideshow",
                "asset": "tutorial_slideshow1",
                "ui_description": "You fought while others ran.",
                "bg_fill_color": [1,1,1,1],
                "disable_landscape_clicks": 1,
                "disable_combat": 1,
                "metric": "0140_tutorial_oneway_ticket",
                "next_button_arrow": 1,
                "next": "will_you_help" },

    "will_you_help": { "kind": "valentina_help_message",
                       "ui_name": "Incoming Transmission",
                       "ui_description": "Commander, this is Narrator. I'm glad you're back!\n\nEnemy forces have overrun our outpost.\n\nPlease help us!",
                       "ui_button": "OK, I'll help",
                       "bg_fill_color": [1,1,1,1],
                       "disable_landscape_clicks": 1,
                       "disable_combat": 1,
                       "metric": "0150_tutorial_incoming_transmission",
                       "ok_button_arrow": 1,
                       "next": "click_on_rover_message" },
    "click_on_rover_message": { "kind": "valentina_nonmodal_message",
                                "force_scroll": [98,102],
                                "ui_description": "Thank you, Commander!\nLet's get you back in charge.\nTo start, click on your army units.",
                                "y_position": 0.01,
                                "black_bar": 1,

                                "player_rovers": 1, // draw box around friendly units
                                "player_rovers_ui_name": "YOUR ARMY",
                                "enemy_rovers": 1, // draw box around enemy units
                                "enemy_rovers_ui_name": "ENEMY",
                                "enemy_rovers_color": "rgba(255,60,60,",

                                "metric": "0160_tutorial_click_on_rover",
                                "next": "click_on_rover_action" },
    "click_on_rover_action": { "kind": "click_on_rover_action",
                               "unit_type": "stryker",
                               "next": "move_rover_message" },
    "move_rover_message": { "kind": "valentina_nonmodal_message",
                            "ui_description": "Now click where indicated to move your soldiers forward.\nYour forces will engage the enemy units as they\ncome into range.",
                            "y_position": 0.01,
                            "black_bar": 1,

                            "player_rovers": 1, // draw box around friendly units
                            "player_rovers_ui_name": "YOUR ARMY",
                            "enemy_rovers": 1, // draw box around enemy units
                            "enemy_rovers_ui_name": "ENEMY",
                            "enemy_rovers_color": "rgba(255,60,60,",

                            "metric": "0170_tutorial_move_rover",
                            "next": "move_rover_action" },
    "move_rover_action": { "kind": "move_rover_action",
                           "coords": [105,88],
                           "next": "click_to_control_message" },
    "click_to_control_message": { "kind": "valentina_nonmodal_message",
                                  "ui_description": "Click on your infantry and helicopters to select them.\n\nThen click on targets to attack.",
                                  "y_position": 0.01,
                                  "black_bar": 1,
                                  "next": "wait_for_battle_finish" },
    "wait_for_battle_finish": { "kind": "wait_for_battle_finish",
                                "next": "repair_message" },
    "repair_message": { "kind": "repair_message",
                        "ui_description": "Excellent Commander.\nAll enemy units destroyed.\nOur outpost now needs repairs.",
                        "bg_fill_color": [0,0,0,0.5],
                        "disable_landscape_clicks": 1,
                        "metric": "0180_tutorial_repair_base",
                        "use_resources_button_arrow": 1,
                        "next": "wait_for_repairs" },
    "wait_for_repairs": { "kind": "wait_for_repairs",
                          "next": "build_cannon_message" },
    "build_cannon_message": { "kind": "valentina_nonmodal_message",
                              "ui_description": "Additional enemies approaching.\nBuild a Mortar Emplacement.\n(Scroll down if you cannot see the \"Buildings\" button)",
                              "next": "open_buildings_dialog" },

    "open_buildings_dialog": { "kind": "open_buildings_dialog",
                               "metric": "0210_tutorial_repair_complete",
                               "scroll_down_hack": 1, // ugly Kongregate hack
                               "next": "go_to_defense_tab" },

    "go_to_defense_tab": { "kind": "go_to_defense_tab",
                           "metric": "0220_tutorial_go_to_defense_tab",
                           "disable_landscape_clicks": 1,
                           "arrow_direction": "up",
                           "next": "choose_defensive_cannon" },

    "choose_defensive_cannon": { "kind": "choose_defensive_cannon",
                                 "target": "mortar_emplacement",
                                 "metric": "0230_tutorial_choose_defensive_cannon",
                                 "disable_landscape_clicks": 1,
                                 "next": "place_defensive_cannon_message" },

    "place_defensive_cannon_message": { "kind": "valentina_nonmodal_message",
                                        "force_scroll": [92,107],
                                        "ui_description": "Click on empty ground to build the mortar.",
                                        "y_position": 0.18,
                                        "next": "place_defensive_cannon" },

    "place_defensive_cannon": { "kind": "place_defensive_cannon",
                                "target": "mortar_emplacement",
                                "location": [92,107],
                                "metric": "0240_tutorial_place_defensive_cannon",
                                "next": "speedup_message" },

    "speedup_message": { "kind": "valentina_nonmodal_message",
                         "ui_description": "Click to instantly speed up any construction\nless than 5 minutes.",
                         "y_position": 0.18,
                         "next": "speedup_open_context_menu" },

    "speedup_open_context_menu": { "kind": "speedup_open_context_menu",
                                   "target": "mortar_emplacement",
                                   "metric": "0242_tutorial_speedup_open_context_menu",
                                   "next": "speedup_open_speedup_menu" },
    "speedup_open_speedup_menu": { "kind": "speedup_open_speedup_menu",
                                   "target": "mortar_emplacement",
                                   "metric": "0243_tutorial_speedup_open_speedup_menu",
                                   "disable_landscape_clicks": 1,
                                   "next": "speedup_click_finish" },

    "speedup_click_finish": { "kind": "speedup_click_finish",
                              "metric": "0244_tutorial_speedup_click_finish",
                              "disable_landscape_clicks": 1,
                              "next": "defensive_cannon_complete" },

    "defensive_cannon_complete": { "kind": "defensive_cannon_complete",
                                   "metric": "0245_tutorial_defensive_cannon_complete",
                                   "next": "ai_attack_begin" },

    "ai_attack_begin": { "kind": "ai_attack",
                         "metric": "0250_tutorial_ai_attack_warning",
                         "spawn_location": [80,130],
                         "ui_warning": "Wretched Foreigner.\n\nI am %s, a deadly war pirate who rules these\nlands. I will crush you and your puny base.\n\nPrepare for annihilation!",
                         "disable_landscape_clicks": 1,
                         "next": "ai_attack_pan_message" },
    "ai_attack_pan_message": { "kind": "valentina_nonmodal_message",
                               "ui_description": "Click and drag with the mouse to scroll the view.",
                               //"show_if": { "predicate": "NOT", "subpredicates": [{"predicate": "PLAYER_HISTORY", "key": "feature_used:scrolling", "value": 1, "method": ">="}] },
                               "y_position": 0.15,
                               "next": "ai_attack_during" },
    "ai_attack_during": { "kind": "null",
                          "next": "ai_attack_end" },
    "ai_attack_end": { "kind": "ai_attack_end",
                       "ui_message": "Wretched Foreigner, I underestimated you this time.\n\nNo matter. My forces are rebuilding to crush you.\n\nYour oblivion is near.",
                       "disable_landscape_clicks": 1,
                       "next": "revenge_message" },

    "revenge_message": { "kind": "valentina_nonmodal_message",
                         "ui_description": "Commander, we must destroy Aruj's base before\nhe trains more units. Click Attack to launch\na counterattack.",
                         "next": "open_map_dialog" },
    "open_map_dialog": { "kind": "open_map_dialog",
                         "metric": "0280_tutorial_open_map_dialog",
                         "next": "spy_on_ai" },
    "spy_on_ai": { "kind": "spy_on_ai",
                   "metric": "0290_tutorial_spy_on_ai",
                   "disable_landscape_clicks": 1,
                   "next": "attack_message" },
    "attack_message": { "kind": "valentina_nonmodal_message",
                        "ui_description": "You've arrived at Aruj's base.\nClick 'Attack' to launch your forces into battle.",
                        "metric": "0300_tutorial_attack_message",
                        "next": "click_attack" },
    "click_attack": { "kind": "click_attack",
                      "next": "deploy_robots_message" },
    "deploy_robots_message": { "kind": "valentina_nonmodal_message",
                               "ui_description": "Click on your units to add them to your attack force.\nUse '+10' to add up to ten units at once.",
                               "metric": "0310_tutorial_deploy_robots_message",
                               "next": "deploy_robots_action" },

    "deploy_robots_action": { "kind": "deploy_robots_action",
                              "button": "DEPLOY_UNIT:stryker",
                              "next": "deploy_robots_action2" },
    "deploy_robots_action2": { "kind": "deploy_robots_action",
                               "button": "DEPLOY_UNIT:rifleman",
                               "next": "place_robots_message" },
    //    "deploy_robots_action3": { "kind": "deploy_robots_action",
    //                             "button": "DEPLOY_UNIT:xxx",
    //                             "next": "place_robots_message" },

    "place_robots_message": { "kind": "valentina_nonmodal_message",
                              "ui_description": "Click at the edge of Aruj's base to deploy\nyour units.",
                              "metric": "0320_tutorial_place_robots_message",
                              "next": "place_robots_action" },
    "place_robots_action": { "kind": "place_robots_action",
                             "coords": [99,136],
                             "next": "multi_select_message" },

    "multi_select_message": { "kind": "valentina_nonmodal_message", "bg_emphasis": 1, // use red background
                              "ui_description": "Right-click and drag to select multiple units at once.",
                              "show_if": { "predicate": "NOT", "subpredicates": [{"predicate": "PLAYER_HISTORY", "key": "feature_used:drag_select", "value": 1, "method": ">="}] },
                              "y_position": 0.15,
                              // "ui_description": "Destroy the Tactical Ops Center!",
                              // "boxes": {
                              //     "enemy_townhall": {
                              //         "ui_name": "Destroy Tactical Ops Center",
                              //         "color": "rgba(255,60,60,",
                              //         "grid_pad": 0.3
                              //     }
                              // },
                              "next": "wait_battle_finish2" },

    "wait_battle_finish2": { "kind": "wait_battle_finish2",
                             "enable_desktop_control_buttons": 1,
                             "targets": {"toc":1, "supply_depot":1, "fuel_depot":1},
                             "next": "battle_end_message" },
    "battle_end_message": { "kind": "battle_end_message",
                            "disable_landscape_clicks": 1,
                            "enable_desktop_control_buttons": 1,
                            "next": "open_missions_dialog" },
    // note: this is skipped now
    "congratulations_message": { "kind": "congratulations_message",
                                 // IAN - may not fit new dialog "ui_description": "Training completed.\nYou can now construct buildings, produce robots,\nand research upgrades to your forces.\n\nAs a final task, see Missions that await you.\n\nI shall serve you valiantly, Commander.",
                                 "ui_name": "Training Complete",
                                 "ui_viral_title": "Battle Friends in Example Game",
                                 "ui_viral_subtitle": "Build your armies together -- and fight to control\nthe land!\n\n",
                                 "ui_description": "You're ready for battle.\n\n\n",
                                 "ui_description_has_no_friends": "Fighting is more fun with friends!",
                                 "ui_description_has_one_friend": "%s also plays Example Game, but\nyou'll advance faster with more friends!",
                                 "ui_description_has_two_friends": "%s and %d other friend also play\nExample Game!",
                                 "ui_description_has_many_friends": "%s and %d other friends also play\nExample Game!",
                                 "disable_landscape_clicks": 1,
                                 "enable_desktop_control_buttons": 1,
                                 "bg_fill_color": [0,0,0,0.5],
                                 "metric": "0340_tutorial_congratulations",
                                 "next": "invite_friends" },
    // note: this is skipped now
    "invite_friends": { "kind": "invite_friends",
                        "metric": "0345_tutorial_invite_friends",
                        "enable_desktop_control_buttons": 1,
                        "next": "open_missions_dialog" },


    "open_missions_dialog": { "kind": "open_missions_dialog",
                              "metric": "0350_tutorial_open_missions_dialog",
                              "enable_desktop_control_buttons": 1,
                              "next": "COMPLETE" },
    "COMPLETE": {}
}
